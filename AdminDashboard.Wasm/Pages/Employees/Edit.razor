@page "/employees/{walletAddress}/edit"
@using AdminDashboard.Wasm.Models.Employee
@inject HttpClient Http

<h3>Edit employee</h3>

<form>
    <div class="form-group">
        <label for="employeeName">Employee Name</label>
        <input type="text" @bind="employee.Name" class="form-control" id="employeeName">
    </div>
    <div class="form-group">
        <label for="employeeSurname">Employee Surname</label>
        <input type="text" @bind="employee.Surname" class="form-control" id="employeeSurname">
    </div>

    <div class="form-group">
        <label for="dateOfBirth">Date of birth</label>
        <input type="text" @bind="employee.DateOfBirth" class="form-control" id="dateOfBirth">
    </div>

    <div class="form-group">
        <label for="emailAddress">Email Address</label>
        <input type="text" @bind="employee.Email" class="form-control" id="emailAddress">
    </div>

    <div class="form-group">
        <label for="nationality">Nationality</label>
        <input type="text" @bind="employee.Nationality" class="form-control" id="nationality">
    </div>

    <div class="form-row">
        <div class="form-group col-md-6">
            <label for="placeOfWork">Place of Work</label>
            <input type="email" @bind="employee.PlaceOfWork" class="form-control" id="placeOfWork">
        </div>

        <div class="form-group col-md-6">
            <label for="walletAddress">Wallet Address</label>
            <input type="email" @bind="employee.WalletAddress" class="form-control" id="walletAddress">
        </div>
    </div>

    <button type="submit" class="btn btn-primary" onclick="OnValidSubmit">Save contract</button>
</form>

@code {

    [Parameter]
    public string WalletAddress { get; set; }

    private EmployeeDetails employee = new();

    protected override async Task OnInitializedAsync()
    {
        var uri = Routes.Employee.Get.Replace("{walletAddress}", WalletAddress);
        employee = await Http.GetFromJsonAsync<EmployeeDetails>(uri);
    }

    private async Task OnValidSubmit()
    {
        try
        {
            await Http.PostAsJsonAsync($"/employee/create", employee);
        }
        catch (Exception ex)
        {
            StateHasChanged();
        }
    }
}